<!DOCTYPE html>
<html>
<head>
  <title>Firebase Test</title>
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { getFirestore, collection, getDocs, query, where } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

    const firebaseConfig = {
      apiKey: "AIzaSyAzR-ZyrupAhkUCXm4KYHHMpHzZ9yWyTqY",
      authDomain: "plan-tracker-4ead0.firebaseapp.com",
      projectId: "plan-tracker-4ead0",
      storageBucket: "plan-tracker-4ead0.firebasestorage.app",
      messagingSenderId: "577825988815",
      appId: "1:577825988815:web:19d7f37c0b61cf02b4f988"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    async function testQuery() {
      console.log('Testing projectRequests query...');
      
      try {
        // Get all documents
        const allSnap = await getDocs(collection(db, 'projectRequests'));
        console.log('Total documents:', allSnap.size);
        
        allSnap.forEach(doc => {
          const data = doc.data();
          console.log('Doc:', doc.id, 'Status:', data.status, 'Name:', data.name);
        });

        // Query for pending
        const q = query(collection(db, 'projectRequests'), where('status', '==', 'pending'));
        const pendingSnap = await getDocs(q);
        console.log('Pending documents:', pendingSnap.size);
        
        document.body.innerHTML = `
          <h1>Firebase Test Results</h1>
          <p>Total documents: ${allSnap.size}</p>
          <p>Pending documents: ${pendingSnap.size}</p>
          <h2>All Documents:</h2>
          <ul>
            ${Array.from(allSnap.docs).map(doc => {
              const data = doc.data();
              return `<li>${doc.id}: ${data.name} (${data.status})</li>`;
            }).join('')}
          </ul>
        `;
      } catch (error) {
        console.error('Error:', error);
        document.body.innerHTML = `<h1>Error: ${error.message}</h1>`;
      }
    }

    testQuery();
  </script>
</head>
<body>
  <h1>Loading...</h1>
</body>
</html>
